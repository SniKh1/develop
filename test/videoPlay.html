<head>
  <link href="https://vjs.zencdn.net/7.8.4/video-js.css" rel="stylesheet" />

  <!-- If you'd like to support IE8 (for Video.js versions prior to v7) -->
  <script src="https://vjs.zencdn.net/ie8/1.1.2/videojs-ie8.min.js"></script>
</head>

<body>
  <video id="my-video" class="video-js" controls preload="auto" width="640" height="264" data-setup="{}">
    <source
      src="http://gt.shigemedia.com/vod/dianshiju/shendunjutegongdi2ji/tv/shendunjutegongdi2jidi1ji.mp4"
      type="video/mp4"
    />
  </video>
  <span class="video_box"></span>
  <script src="https://vjs.zencdn.net/7.8.4/video.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>
</body>
<script>
  window.myVideo = window.videojs('my-video', {
    bigPlayButton: true,
    textTrackDisplay: false,
    posterImage: false,
    errorDisplay: false
  })
  window.myVideo.play()
  var myPlayer = videojs.getPlayers()['my-video']
  myPlayer.on('loadedmetadata', function () {
    videoLength = videojs('my-video').duration()
    console.log(videoLength)
    var ctime = videojs('my-video').currentTime()

    console.log('loadedmetadata-视频源数据加载完成')
    //设置上次播放时间lastLearnTime(秒)
    myPlayer.currentTime(0)
  })
  myPlayer.on('timeupdate', function () {
    //视频时间改变时调用
    const curTime = myPlayer.currentTime()
    console.log('timeupdate-------------', curTime)
    var a = '正在播放' + curTime
    $('.video_box').text(a)
    if (curTime > 60) {
      console.log('加载错误')
      this.dispose()
    }
  })

  myPlayer.on('suspend', function () {
    //延迟下载
    console.log('延迟下载')
  })
  myPlayer.on('loadstart', function () {
    //客户端开始请求数据
    console.log('客户端开始请求数据')
  })
  myPlayer.on('progress', function () {
    //客户端正在请求数据
    console.log('客户端正在请求数据')
  })
  myPlayer.on('abort', function () {
    //客户端主动终止下载（不是因为错误引起）
    console.log('客户端主动终止下载')
  })
  myPlayer.on('error', function () {
    //请求数据时遇到错误
    console.log('请求数据时遇到错误')
  })
  myPlayer.on('stalled', function () {
    //网速失速
    console.log('网速失速')
  })
  myPlayer.on('play', function () {
    //开始播放
    console.log('开始播放')
  })
  myPlayer.on('pause', function () {
    //暂停
    console.log('暂停')
  })
  myPlayer.on('loadedmetadata', function () {
    //成功获取资源长度
    console.log('成功获取资源长度')
  })
  myPlayer.on('loadeddata', function () {
    //渲染播放画面
    console.log('渲染播放画面')
  })
  myPlayer.on('waiting', function () {
    //等待数据，并非错误
    console.log('等待数据')
  })
  myPlayer.on('playing', function () {
    //开始回放
    console.log('开始回放')
  })
  myPlayer.on('canplay', function () {
    //可以播放，但中途可能因为加载而暂停
    console.log('可以播放，但中途可能因为加载而暂停')
  })
  myPlayer.on('canplaythrough', function () {
    //可以播放，歌曲全部加载完毕
    console.log('可以播放，歌曲全部加载完毕')
  })
  myPlayer.on('seeking', function () {
    //寻找中
    console.log('寻找中')
  })
  myPlayer.on('seeked', function () {
    //寻找完毕
    console.log('寻找完毕')
  })
  myPlayer.on('timeupdate', function () {
    //播放时间改变
    console.log('播放时间改变')
  })
  myPlayer.on('ended', function () {
    //播放结束
    console.log('播放结束')
  })
  myPlayer.on('ratechange', function () {
    //播放速率改变
    console.log('播放速率改变')
  })
  myPlayer.on('durationchange', function () {
    //资源长度改变
    console.log('资源长度改变')
  })
  myPlayer.on('volumechange', function () {
    //音量改变
    console.log('音量改变')
  })
</script>
